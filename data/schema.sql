CREATE TABLE STANDORT{
  Stadt      VARCHAR NOT NULL CHECK(length(Stadt)>1 AND length(Stadt)<50 AND Stadt NOT GLOB '*[^ -~]*'),
  PLZ        INTEGER NOT NULL CHECK(PLZ>1000 AND PLZ<100000),
  Strasse    VARCHAR NOT NULL CHECK(length(Strasse)>1 AND length(Strasse)<50 AND Strasse NOT GLOB '*[^ -~]*'),
  Hausnummer INTEGER NOT NULL CHECK(Hausnummer>0 AND Hausnummer<2000),
  SID        INTEGER UNIQUE PRIMARY KEY AUTOINCREMENT
};
CREATE TABLE NUTZER{
  Name       VARCHAR NOT NULL CHECK(length(Name)>1 AND length(Name)<50 AND LAND NOT GLOB '[^ -~]') PRIMARY KEY,--TBC
  Passwort   VARCHAR NOT NULL CHECK(length(Passwort)>2 AND length(Passwort)<50 AND Passwort NOT GLOB '*[^ -~]*' AND Passwort GLOB '*[A-Z]*[A-Z]*' AND Passwort GLOB '*[0-9]*'),--TBC
  SID        INTEGER REFERENCES STANDORT (SID)
};
CREATE TABLE GERAET{
  Typ        VARCHAR NOT NULL CHECK(length(Name)>1 AND length(Name)<50 AND LAND NOT GLOB '[^ -~]') PRIMARY KEY,
};
CREATE TABLE RAUM{
  Nummer     INTEGER NOT NULL CHECK(Nummer>0 AND Nummer<100),--TBC
  Etage      INTEGER NOT NULL CHECK(Etage>-2 AND Etage<50),--TBC
  SID        INTEGER REFERENCES STANDORT (SID),
  RID        INTEGER UNIQUE PRIMARY KEY AUTOINCREMENT
};
CREATE TABLE PLATZ{
  PID        INTEGER UNIQUE PRIMARY KEY AUTOINCREMENT
};
CREATE TABLE NUTZT{
  Name VARCHAR REFERENCES NUTZER (Name),
  Typ  VARCHAR REFERENCES GERAET (Typ),
  PRIMARY KEY (
      Name,
      Typ
  )
};
CREATE TABLE VERFUEGBAR{
  PID INTEGER REFERENCES PLATZ (PID),
  Typ  VARCHAR REFERENCES GERAET (Typ),
  PRIMARY KEY (
      PID,
      Typ
  )
};
CREATE TABLE BESETZT{
  Name VARCHAR REFERENCES NUTZER (Name),
  PID  INTEGER REFERENCES PLATZ (PID),
  Datum DATE NOT NULL CHECK(Datum==strftime('%YYYY-%MM-%DD',Datum)),
  PRIMARY KEY (
      Name,
      PID
  )
};
